"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[918],{8918:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v,emptyCategoryForm:()=>b});var r=a(5043),n=a(3003),i=a(5026),o=a(7150);var s=a(4773),l=a(2719);const c=()=>{const e=(0,n.wA)(),t=(0,n.d4)((e=>e.categoryReducer)),a=t.all.data,r=t.all.meta,c=t.show,u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t=void 0===t?function(){const e=new URLSearchParams(window.location.search),t=new Set;e.forEach(((e,a)=>{t.add(a)}));const a=Array.from(t),r=new URLSearchParams;return a.forEach((t=>r.append(t,e.get(t)))),r}():t,e((0,s.y3)(!0)),i.A.get("/admin/categories",{params:t}).then((t=>{e((0,o.AV)(t.data.data)),e((0,o.FA)(t.data.meta))})).finally((()=>{e((0,s.y3)(!1))}))};return{allCategories:a,allCategoriesMeta:r,oneCategory:c,getAllCategoriesLogic:u,getOneCategoryLogic:t=>{i.A.get("/admin/categories/".concat(t)).then((t=>{e((0,o.hv)(t.data.data))}))},storeCategoryLogic:(e,t)=>{const{setSubmitting:a}=t;i.A.postForm("/admin/categories",e).then((()=>{u()})).catch((e=>(0,l.dM)(e.response.data,t))).finally((()=>a(!1)))},updateCategoryLogic:(e,t,a)=>{const{setSubmitting:r}=a;i.A.postForm("/admin/categories/".concat(t),e).then((()=>{u()})).catch((e=>(0,l.dM)(e.response.data,a))).finally((()=>r(!1)))},deleteCategoryLogic:(e,t)=>{i.A.delete("/admin/categories/".concat(e)).then((()=>u())).finally((()=>t(!1)))}}};var u=a(4061);const d=(e,t)=>{const[a,n]=(0,r.useState)((0,u.d8)()),[i,o]=(0,r.useState)((0,u.pQ)());(0,r.useEffect)((()=>{e()}),[i,a]),(0,r.useEffect)((()=>{n(t.perPage),o(t.currentPage)}),[t]);return{currentPerPage:a,currentPage:i,handlePageChange:e=>{o(e),(0,u.u7)(e,a)},handlePerPageChange:e=>{n(e),(0,u.u7)(i,e),n(e)},setCurrentPageState:o}};var g=a(6444);const m=(0,g.Ay)({name:(0,g.j2)()});var h=a(9546),f=a(579);const p=(0,r.lazy)((()=>Promise.all([a.e(750),a.e(43)]).then(a.bind(a,3043)))),b={name:""},v=()=>{const{allCategories:e,allCategoriesMeta:t,oneCategory:a,getAllCategoriesLogic:n,getOneCategoryLogic:i,storeCategoryLogic:o,updateCategoryLogic:s,deleteCategoryLogic:u}=c(),[g,v]=(0,r.useState)((0,h.XY)({})),C=(0,r.useRef)(null),S=(0,l.eA)({initialValues:g?b:{name:a.name},validationSchema:m,onSubmit:()=>{const e=new FormData(C.current);g?o(e,(0,l.fe)(S)):s(e,a.id,(0,l.fe)(S))}}),{currentPerPage:y,currentPage:P,setCurrentPageState:w,handlePageChange:A,handlePerPageChange:j}=d(n,t),{values:L,errors:O,handleChange:R,isSubmitting:V,handleSubmit:E,handleBlur:q,isValid:F,resetForm:k,setValues:I}=S;return(0,f.jsx)(p,{data:{allCategories:e,oneCategory:a},showOne:i,handleDelete:e=>u(e,S.setSubmitting),formFields:{formRef:C,values:L,errors:O,isSubmitting:V,handleChange:R,handleSubmit:E,isValid:F,handleBlur:q,resetForm:k,setValues:I},setInAdd:v,paginationObject:{meta:t,currentPerPage:y,currentPage:P,setCurrentPageState:w,handlePageChange:A,handlePerPageChange:j}})}},2719:(e,t,a)=>{a.d(t,{fe:()=>m,dM:()=>g,eA:()=>d});var r=a(3892),n=a(5173),i=a.n(n);const o=e=>{let{initialValues:t,validationSchema:a,onSubmit:r,overrideConfig:n}=e;return{initialValues:t,validateOnBlur:!0,validateOnChange:!1,validateOnMount:!1,enableReinitialize:!0,validationSchema:a,onSubmit:r,...n}};o.propTypes={initialValues:i().object,validationSchema:i().object.isRequired,onSubmit:i().func.isRequired};const s=o;var l=a(6762),c=a(5431),u=a(9546);const d=e=>{const t=s(e);return(0,r.Wx)(t)},g=(e,t)=>{const{initialValues:a,setErrors:r}=t,n=Object.keys(a);if(e.code===l.c.VALIDATION_ERRORS){const t={};n.forEach((a=>{void 0!==e.data[a]&&(t[a]=e.data[a])})),(0,u.XY)(t)||r(t)}const i=Object.keys(e.data);for(let o=0;o<i.length;o++)if(!n.includes(i[o])){c.A.error(e.data[i[o]]);break}},m=e=>({setErrors:e.setErrors,initialValues:e.initialValues,setSubmitting:e.setSubmitting});d.propTypes={initialValues:i().object,validationSchema:i().object.isRequired,onSubmit:i().func.isRequired,overrideConfig:i().object}},4061:(e,t,a)=>{a.d(t,{cN:()=>o,d8:()=>l,pQ:()=>s,u7:()=>c});var r=a(5043),n=a(579);const i=(0,r.lazy)((()=>a.e(547).then(a.bind(a,6547)))),o=e=>(0,n.jsx)(i,{...e});function s(e){return e=Number.parseInt(e),(!Number.isInteger(e)||e<1)&&(e=1),e}function l(e){return e=Number.parseInt(e),(!Number.isInteger(e)||e<5||e>100)&&(e=5),e}function c(e,t){const a=new URLSearchParams(window.location.search);a.set("page",s(e).toString()),a.set("per_page",l(t).toString());const r="".concat(window.location.pathname,"?").concat(a.toString());window.history.pushState({path:r},"",r)}},6444:(e,t,a)=>{a.d(t,{Ay:()=>u,w_:()=>s,Fv:()=>c,j2:()=>l});var r=a(899);const n=e=>e instanceof File,i={file:(e,t)=>!!n(e)||t("field must be a valid file"),image:(e,t)=>{var a;console.log(e,e.size,e.type);const r=(null===e||void 0===e||null===(a=e.type)||void 0===a?void 0:a.split("/")[0])||null;return!(!n(e)||"image"!==r)||t({message:"field must be an image"})}},o=(e,t)=>{var a;return t&&Object.keys(t).forEach((a=>{t[a]?delete e[a]:e[a]=t[a]})),null===(a=Object.values(e))||void 0===a?void 0:a.filter((e=>!!e))},s=e=>o({required:"required",email:"email",trim:"trim"},e),l=e=>o({required:"required",max:"max:255",trim:"trim"},e),c=e=>o({required:"required",min:"min:8",trim:"trim"},e),u=e=>{let t=r.Ik().shape({});return Object.entries(e).forEach((e=>{let[a,n]=e;if(n){let e=r.Yj();n.forEach((t=>{const[a,...r]=t.split(":");e=void 0!==i[a]?e.test(a,"error",((e,t)=>{let{createError:n}=t;return i[a](e,n,...r)})):e[a](...r)})),t=t.shape({[a]:e})}})),t}}}]);
//# sourceMappingURL=918.19ba07d2.chunk.js.map