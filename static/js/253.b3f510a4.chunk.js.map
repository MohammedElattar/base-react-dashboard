{"version":3,"file":"static/js/253.b3f510a4.chunk.js","mappings":"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","sources":["modules/auth/validation/LoginSchema.js","modules/auth/services/loginService.js","modules/auth/containers/LoginContainer.jsx","utility/formik/formikConfig.js","utility/formik/formikHelper.js","utility/validation/customSchema.js","utility/helpers/validationRuleHelper.js"],"sourcesContent":["import generateSchema, {emailRules, passwordRules} from \"../../../utility/helpers/validationRuleHelper\"\n\nconst LoginSchema = () => {\n    return generateSchema({\n        email: emailRules({required: null}),\n        password: passwordRules({min: null})\n    })\n}\n\nexport default LoginSchema\n\n// export type nn= z.infer<ReaturnValue<typeof","import {useAuthLogic} from \"../hooks/useAuthLogic\";\n\nconst LoginService = () => {\n    const {dispatchLogin, loginSelector} = useAuthLogic()\n    const {userInfo, isLoading, code} = loginSelector;\n\n    const handleLogin = async (payload) => {\n        await dispatchLogin(payload)\n    }\n\n    return {\n        handleLogin,\n        userInfo,\n        isLoading,\n        code\n    }\n}\n\nexport default LoginService\n","import {lazy, useEffect} from \"react\"\nimport {formikInstance} from \"../../../utility/formik/formikHelper\";\nimport loginSchema from \"../validation/LoginSchema\";\nimport LoginService from \"../services/loginService\";\nimport {HttpResponse} from \"../../../constants/api\";\nimport {useNavigate} from \"react-router-dom\";\nimport {DEFAULT_ROUTE} from \"../../../constants/routes\";\nimport {isUserLoggedIn} from \"../utils/authHelper\";\nimport {resetStore} from \"../../../redux/store\";\n\nconst LoginView = lazy(() => import(\"../views/LoginView\"))\n\nconst LoginContainer = () => {\n    const navigate = useNavigate()\n\n    useEffect(() => {\n        if (isUserLoggedIn()) {\n            navigate(DEFAULT_ROUTE);\n        } else {\n            resetStore()\n        }\n    }, [navigate]);\n\n    const {handleLogin, isLoading, code} = LoginService();\n    const formik = formikInstance({\n        initialValues: {email: '', password: ''},\n        validationSchema: loginSchema(),\n        onSubmit: (values) => handleLogin(values)\n    });\n\n    useEffect(() => {\n        if (code === HttpResponse.OK) {\n            navigate(DEFAULT_ROUTE, {replace: true})\n        }\n    }, [code]);\n\n    return <LoginView\n        handleSubmit={formik.handleSubmit}\n        formikValues={formik.values}\n        handleChange={formik.handleChange}\n        formikErrors={formik.errors}\n        isSubmitting={isLoading}\n    />\n}\n\nexport default LoginContainer","import PropTypes from \"prop-types\";\n\nconst FormikConfig = ({initialValues, validationSchema, onSubmit, overrideConfig}) => {\n    return {\n        initialValues,\n        validateOnBlur: true,\n        validateOnChange: false,\n        validateOnMount: false,\n        enableReinitialize: true,\n        validationSchema,\n        onSubmit,\n        ...overrideConfig\n    }\n}\n\nFormikConfig.propTypes = {\n    initialValues: PropTypes.object,\n    validationSchema: PropTypes.object.isRequired,\n    onSubmit: PropTypes.func.isRequired\n}\n\nexport default FormikConfig","import {useFormik} from \"formik\";\nimport FormikConfig from \"./formikConfig\";\nimport PropTypes from \"prop-types\";\nimport {HttpResponse} from \"../../constants/api\";\nimport toastFactory from \"../factories/toastFactory\";\nimport {isObjEmpty} from \"../Utils\";\n\nexport const formikInstance = (props) => {\n    const formikConfig = FormikConfig(props)\n\n    return useFormik(formikConfig)\n}\n\nexport const formikErrorHandler = (response, formikObject) => {\n    const {initialValues, setErrors} = formikObject;\n\n    const errorKeys = Object.keys(initialValues);\n\n    if (response.code === HttpResponse.VALIDATION_ERRORS) {\n        const tmpErrors = {}\n\n        errorKeys.forEach((errorKey) => {\n            if (response.data[errorKey] !== undefined) {\n                tmpErrors[errorKey] = response.data[errorKey]\n            }\n        })\n\n        if (!isObjEmpty(tmpErrors)) {\n            setErrors(tmpErrors)\n        }\n    }\n\n    const responseErrorKeys = Object.keys(response.data);\n\n    for (let i = 0; i < responseErrorKeys.length; i++) {\n        if (!errorKeys.includes(responseErrorKeys[i])) {\n            toastFactory.error(response.data[responseErrorKeys[i]])\n            break;\n        }\n    }\n}\n\nexport const buildFormikParams = (formik) => {\n    return {\n        setErrors: formik.setErrors,\n        initialValues: formik.initialValues,\n        setSubmitting: formik.setSubmitting\n    }\n}\n\nformikInstance.propTypes = {\n    initialValues: PropTypes.object,\n    validationSchema: PropTypes.object.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    overrideConfig: PropTypes.object\n}","const isFile = (value) => {\n    return (value instanceof File)\n}\n\nconst fileSchema = (value, createError) => {\n    if (!isFile(value)) {\n        return createError('field must be a valid file')\n    }\n\n    return true;\n}\n\nconst imageSchema = (value, createError) => {\n    console.log(value, value.size, value.type)\n    const type = value?.type?.split('/')[0] || null;\n\n    if (!isFile(value) || type !== 'image') {\n        return createError({message: 'field must be an image'})\n    }\n\n    return true;\n}\n\nconst customSchema = {\n    file: fileSchema,\n    image: imageSchema\n}\n\nexport default customSchema","import * as Yup from 'yup'\nimport customSchema from \"../validation/customSchema\";\n\nexport const replaceDefaultRules = (defaultRules, newRules) => {\n    if (newRules) {\n        Object.keys(newRules).forEach((key) => {\n            if (newRules[key]) {\n                delete defaultRules[key]\n            } else {\n                defaultRules[key] = newRules[key]\n            }\n        })\n    }\n\n\n    return Object.values(defaultRules)?.filter((item) => !!item)\n}\n\nexport const emailRules = (newRules) => {\n    const defaultRules = {\n        required: 'required',\n        email: 'email',\n        trim: 'trim'\n    }\n\n    return replaceDefaultRules(defaultRules, newRules)\n}\n\nexport const stringRules = (newRules) => {\n    const defaultRules = {\n        required: 'required',\n        max: 'max:255',\n        trim: 'trim'\n    }\n\n    return replaceDefaultRules(defaultRules, newRules)\n}\n\nexport const imageRules = (newRules) => {\n    const defaultRules = {\n        required: 'required',\n        image: 'image'\n    }\n\n    return replaceDefaultRules(defaultRules, newRules)\n}\n\nexport const passwordRules = (newRules) => {\n    const defaultRules = {\n        required: 'required',\n        min: 'min:8',\n        trim: 'trim'\n    }\n\n    return replaceDefaultRules(defaultRules, newRules)\n}\n\nconst generateSchema = (allRulesObject) => {\n    let schema = Yup.object().shape({});\n\n    Object.entries(allRulesObject).forEach(([fieldName, fieldRules]) => {\n        if (fieldRules) {\n            let fieldSchema = Yup.string();\n\n            fieldRules.forEach((rule) => {\n                const [ruleName, ...params] = rule.split(':');\n\n                if (customSchema[ruleName] !== undefined) {\n                    fieldSchema = fieldSchema.test(\n                        ruleName,\n                        'error',\n                        (value, {createError}) => customSchema[ruleName](value, createError, ...params));\n                } else {\n                    fieldSchema = fieldSchema[ruleName](...params);\n                }\n            });\n\n            schema = schema.shape({[fieldName]: fieldSchema});\n        }\n    });\n\n    return schema;\n};\n\n\nexport const yupInstance = Yup;\nexport default generateSchema"],"names":["LoginSchema","generateSchema","email","emailRules","required","password","passwordRules","min","LoginService","dispatchLogin","loginSelector","useAuthLogic","userInfo","isLoading","code","handleLogin","async","payload","LoginView","lazy","LoginContainer","navigate","useNavigate","useEffect","isUserLoggedIn","DEFAULT_ROUTE","resetStore","formik","formikInstance","initialValues","validationSchema","loginSchema","onSubmit","values","HttpResponse","OK","replace","_jsx","handleSubmit","formikValues","handleChange","formikErrors","errors","isSubmitting","FormikConfig","_ref","overrideConfig","validateOnBlur","validateOnChange","validateOnMount","enableReinitialize","propTypes","PropTypes","isRequired","props","formikConfig","useFormik","formikErrorHandler","response","formikObject","setErrors","errorKeys","Object","keys","VALIDATION_ERRORS","tmpErrors","forEach","errorKey","undefined","data","isObjEmpty","responseErrorKeys","i","length","includes","toastFactory","error","buildFormikParams","setSubmitting","isFile","value","File","file","fileSchema","createError","image","imageSchema","_value$type","console","log","size","type","split","message","replaceDefaultRules","defaultRules","newRules","_Object$values","key","filter","item","trim","stringRules","max","allRulesObject","schema","Yup","shape","entries","fieldName","fieldRules","fieldSchema","rule","ruleName","params","customSchema","test","_ref2"],"sourceRoot":""}